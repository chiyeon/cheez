<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Woodstock</title>

   <link rel="stylesheet" href="style.css">
</head>
<body>
   <div id="board"></div>

   <button id="butt">Perform Best Move</button>

   <script src="index.js"></script>
   <script src="board.js"></script>
   <script>
      const set_board = (b) => {
         board.set_board(b)
         board.update_chessboard()
      }

      let board = new Chessboard("board");

      document.addEventListener("DOMContentLoaded", async () => {
         const woodstock = await WoodstockModule();

         butt.addEventListener("click", () => {
            woodstock.ccall(
               "make_best_move", // name of C function
               null, // return type
               null, // argument types
               null, // arguments
            );
         })

         for (let i = 0; i < 64; i++) {
            let square = document.getElementById(`sq-${i}`)
            square.addEventListener("click", () => {
               woodstock.ccall(
                  "highlight_possible_moves",
                  null,
                  [ "number" ],
                  [ i ]
               )
            })
         }
      });
   </script>
   {{{ SCRIPT }}}
</body>
</html>